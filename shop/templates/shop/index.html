{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <script src="{% static 'js/scripts.js' %}"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoShop - Your Unique E-Commerce Store</title>

    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

<!-- Header -->
<header class="header">
    <div class="container">
        <div class="logo">
            <h1>TRENDO</h1>
        </div>
        <div class="header-right">
    <input type="text" placeholder="Search products..." class="search-bar">

    <button id="open-cart" class="nav-cart-btn">
        üõí Cart
    </button>
</div>

    </div>
</header>

<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <h2>Welcome to EcoShop</h2>
        <p>Discover unique, sustainable products that make a difference. Shop now and join the eco-revolution!</p>
        <a href="#" class="cta-btn">Shop Now</a>
    </div>
    <div class="hero-bg"></div>
</section>

{% for cat in categories %}

<h2 class="mt-5 mb-3">{{ cat.name }}</h2>

<div id="carousel-{{ cat.id }}" class="carousel slide" data-ride="carousel" data-interval="3000">

    <div class="carousel-inner">

        {% for product in cat.products.all %}

            {% if forloop.first or forloop.counter0|divisibleby:4 %}
                <div class="carousel-item {% if forloop.first %}active{% endif %}">
                    <div class="row">
            {% endif %}

            <div class="col-md-3">
                <div class="product-card">

                    {% if product.image %}
                        <img src="{{ product.image.url }}" class="img-fluid">
                    {% endif %}

                    <h3>{{ product.name }}</h3>
                    <p class="price">{{ product.price }}</p>

                    <!-- ONLY ONE add to cart button -->
                    <button
                    type="button"
                     class="btn btn-sm btn-primary add-to-cart"
                    data-id="{{ product.id }}"
                    data-name="{{ product.name }}">
                  Add to cart
                 </button>




                </div>
            </div>

            {% if forloop.counter|divisibleby:4 or forloop.last %}
                    </div>
                </div>
            {% endif %}

        {% endfor %}

    </div>

    <!-- controls -->
    <a class="carousel-control-prev" href="#carousel-{{ cat.id }}" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </a>

    <a class="carousel-control-next" href="#carousel-{{ cat.id }}" role="button" data-slide="next">
        <span class="carousel-control-next-icon"></span>
    </a>

</div>

{% endfor %}

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="footer-section">
            <h3>EcoShop</h3>
            <p>Your go-to for sustainable shopping.</p>
        </div>
        <div class="footer-section">
            <h3>Quick Links</h3>
            <ul>
                <li><a href="#">Privacy Policy</a></li>
                <li><a href="#">Terms of Service</a></li>
                <li><a href="#">Returns</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>Follow Us</h3>
            <div class="social-icons">
                <a href="#">üìò</a>
                <a href="#">üê¶</a>
                <a href="#">üì∑</a>
            </div>
            <form class="newsletter">
                <input type="email" placeholder="Subscribe to newsletter">
                <button type="submit">Subscribe</button>
            </form>
        </div>
    </div>
    <p class="footer-bottom">&copy; 2023 EcoShop. All rights reserved.</p>
</footer>

<!-- Toast -->
<div id="cart-toast" class="cart-toast"></div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const toast = document.getElementById("cart-toast");

    document.querySelectorAll(".add-to-cart").forEach(function (btn) {

        btn.addEventListener("click", function (e) {

            e.preventDefault();

            const name = this.dataset.name || "Product";

            toast.textContent = "‚úÖ " + name + " added to cart";

            toast.classList.add("show");

            setTimeout(function () {
                toast.classList.remove("show");
            }, 2000);

        });

    });

});
</script>
<div id="cart-popup" class="cart-popup">

    <div class="cart-popup-header">
        <h5>Your Cart</h5>
        <button id="close-cart" class="close-cart">‚úñ</button>
    </div>

    <div id="cart-items" class="cart-items">
        <p class="empty-cart">No items in cart</p>
    </div>

    <div class="cart-footer">
    <div class="cart-total" id="cart-total"></div>
    <button class="pay-btn">Pay</button>
</div>


</div>


</body>
</html>
